<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1"/>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>IAM Greenfield</title>
    <!-- add style -->
    <link rel="stylesheet" href="css/css.css"/>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <!-- add interaction control -->
    <script type="application/javascript" src="js/jsl.js"></script>
    <script type="application/javascript" src="js/jsr.js"></script>
    <!-- add the "library" script wrapping XMLHttpRequest -->
    <script type="application/javascript" src="js/lib/xhr.js"></script>
</head>
<body>


<div class="background-image"></div>
<div class="content">

    <!------ header with cover art and title etc... -->
    <div id="header">

    </div>

    <div class="text-white position-absolute"
         style="top: 36.5vh; right: 15px">
        <i class="display-1 bi bi-play-circle-fill"></i>
    </div>


    <div class="container">
        <div class="row">
            <div class="col">
                <ol class="list-group playlist py-3" id="playlist">

                    <li class="list-group-item d-flex" aria-current="true">
                        <img class="cover-art" src="/css/img/we own the night.jpg"/>
                        <div class="ms-2 me-auto">
                            <small class="duration">3:39</small><br>
                            <span class="title">active item</span> <br>
                            <small class="artist">your mom</small>
                        </div>
                        <div class="fs-1 py-2">...</div>
                    </li>
                    <li class="list-group-item d-flex" aria-current="true">
                        <img class="cover-art" src="/css/img/we own the night.jpg"/>
                        <div class="ms-2 me-auto">
                            <small class="duration">3:39</small><br>
                            <span class="title">active item</span> <br>
                            <small class="artist">your mom</small>
                        </div>
                        <div class="fs-1 py-2">...</div>
                    </li>
                    <li class="list-group-item active shadow d-flex" aria-current="true">
                        <img class="cover-art" src="/css/img/we own the night.jpg"/>
                        <div class="ms-2 me-auto">
                            <small class="duration">3:39</small><br>
                            <span class="title">active item</span> <br>
                            <small class="artist">your mom</small>
                        </div>
                        <div class="fs-1 py-2">...</div>
                    </li>
                    <li class="list-group-item d-flex" aria-current="true">
                        <img class="cover-art" src="/css/img/we own the night.jpg"/>
                        <div class="ms-2 me-auto">
                            <small class="duration">3:39</small><br>
                            <span class="title">active item</span> <br>
                            <small class="artist">your mom</small>
                        </div>
                        <div class="fs-1 py-2">...</div>
                    </li>
                    <li class="list-group-item d-flex" aria-current="true">
                        <img class="cover-art" src="/css/img/we own the night.jpg"/>
                        <div class="ms-2 me-auto">
                            <small class="duration">3:39</small><br>
                            <span class="title">active item</span> <br>
                            <small class="artist">your mom</small>
                        </div>
                        <div class="fs-1 py-2">...</div>
                    </li>
                    <li class="list-group-item d-flex" aria-current="true">
                        <img class="cover-art" src="/css/img/we own the night.jpg"/>
                        <div class="ms-2 me-auto">
                            <small class="duration">3:39</small><br>
                            <span class="title">active item</span> <br>
                            <small class="artist">your mom</small>
                        </div>
                        <div class="fs-1 py-2">...</div>
                    </li>

                </ol>
            </div>
        </div>
    </div>

</div>

</div>

<script>

    const playlist = [
        {
            art: "we own the night.jpg",
            title: "We own the night",
            duration: "3:39",
            artist: "Tiesto feat. Wolfgang Gartner"
        },
        {
            art: "everything i wanted.jpg",
            title: "everything i wanted",
            duration: "4:06",
            artist: "Billie Eilish"
        },
        {
            art: "ill be around.jpg",
            title: "I'll Be Around",
            duration: "3:39",
            artist: "The Spinners"
        },
        {
            art: "we own the night.jpg",
            title: "We own the night",
            duration: "3:39",
            artist: "Tiesto feat. Wolfgang Gartner"
        },
        {
            art: "everything i wanted.jpg",
            title: "everything i wanted",
            duration: "4:06",
            artist: "Billie Eilish"
        },
        {
            art: "ill be around.jpg",
            title: "I'll Be Around",
            duration: "3:39",
            artist: "The Spinners"
        },
        {
            art: "we own the night.jpg",
            title: "We own the night",
            duration: "3:39",
            artist: "Tiesto feat. Wolfgang Gartner"
        },
        {
            art: "everything i wanted.jpg",
            title: "everything i wanted",
            duration: "4:06",
            artist: "Billie Eilish"
        },
        {
            art: "ill be around.jpg",
            title: "I'll Be Around",
            duration: "3:39",
            artist: "The Spinners"
        },

    ]

    let active = 1;

    const playlistElement = document.getElementById('playlist');
    const headerElement = document.getElementById('header');


    function renderPlaylist() {

        let playlistHTML = "";

        for (let i = 0; i < playlist.length; i++) {
            playlistHTML += `
            <li class="list-group-item d-flex ` + ( i == active ? " active shadow " : "") + `"
                onclick="active = ` + i + `; renderAll(); "
                aria-current="true">
                <img class="cover-art" src="/css/img/` + playlist[i].art + `"/>
                <div class="ms-2 me-auto">
                    <small class="duration">` + playlist[i].duration + `</small><br>
                    <span class="title">` + playlist[i].title + `</span> <br>
                    <small class="artist">` + playlist[i].artist + `</small>
                </div>
                <div class="fs-1 py-2">...</div>
            </li>
        `;
        }

        playlistElement.innerHTML = playlistHTML;

    }


    function renderHeader() {

        headerElement.innerHTML = `
            <div class="position-relative"
                 style="background-image:
                            linear-gradient(to top,
                                rgba(0, 0, 0, 1), 10%,
                                rgba(0, 0, 0, 0.0), 50%,
                                rgba(0, 0, 0, 0.0), 95%,
                                rgba(0, 0, 0, 0.7)),
                            url('/css/img/` + playlist[active].art + `');
                        background-size: cover;
                        background-position: center;
                        height: 40vh;
                        overflow:hidden;">

                <!--- blurred image to blend over the original -->
                <div class="position-absolute w-100 h-100"
                     style="background-image:
                                linear-gradient(to top,
                                    rgba(0, 0, 0, 1), 30%,
                                    rgba(0, 0, 0, 0.0), 55%,
                                    rgba(0, 0, 0, 0.0), 60%,
                                    rgba(0, 0, 0, 0.9), 99%,
                                    rgba(0, 0, 0, 1)),
                                url('/css/img/` + playlist[active].art + `');
                            background-size: cover;
                            background-position: center;
                            /* mix-blend-mode: lighten; */
                            filter: blur(20px);
                            object-fit: cover;
                            -webkit-mask-image: linear-gradient(to top, black 10%, transparent 30%, transparent 45%, #fffe 75%, black 80%);
                            mask-image: linear-gradient(to top, transparent 5%, black 100%);
                            transform: scale(1.3);
                            top: -14%;
                            /* mix-blend-mode: exclusion;">
                </div>

                <div class="container h-100 position-relative">
                    <div class="row">
                        <div class="col mt-2">
                            <i class="bi bi-arrow-left text-white h1"></i>
                        </div>
                    </div>
                    <div class="row position-absolute bottom-0 mb-3">
                        <div class="col">
                            <h1 class="text-white mb-1">` + playlist[active].title + `</h1>
                            <h6 class="text-white mb-1">` + playlist[active].artist + `</h6>
                            <img src="/css/img/dolby-atmos.webp" height="20px" style="filter: invert(1)"/>
                        </div>

                    </div>


                    <br>
                    <br>
                </div>
            </div>
        `;

    }

    function renderAll() {
        renderPlaylist();
        renderHeader();
    }

    renderAll();

</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>
</html>